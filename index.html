<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Bongo.js by aaronshaf</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Bongo.js</h1>
        <p>Wrapper for IndexedDB. Store significant amounts of structured data on the browser.</p>

        <p class="view"><a href="https://github.com/aaronshaf/bongo.js">View the Project on GitHub <small>aaronshaf/bongo.js</small></a></p>


        <ul>
          <li><a href="https://github.com/aaronshaf/bongo.js/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/aaronshaf/bongo.js/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/aaronshaf/bongo.js">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h2>Easy, peasy, lemon squeezy</h2>

<p>Tested in Chrome 26, Chrome 29, Firefox 22, and Internet Explorer 10.</p>

<h3>Check for support</h3>

<div class="highlight"><pre><span class="k">if</span><span class="p">(</span><span class="nx">bongo</span><span class="p">.</span><span class="nx">supported</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Woo hoo!</span>
<span class="p">}</span>
</pre></div>

<h3>Define database</h3>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">db</span> <span class="o">=</span> <span class="nx">bongo</span><span class="p">.</span><span class="nx">db</span><span class="p">({</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">'acme'</span><span class="p">,</span>
  <span class="nx">objectStores</span><span class="o">:</span> <span class="p">[</span><span class="s2">"users"</span><span class="p">]</span>
<span class="p">});</span>
</pre></div>

<h3>Access database</h3>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">db</span> <span class="o">=</span> <span class="nx">bongo</span><span class="p">.</span><span class="nx">acme</span><span class="p">;</span>
</pre></div>

<h3>insert</h3>

<div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">insert</span><span class="p">({</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s2">"John Doe"</span><span class="p">,</span>
  <span class="nx">email</span><span class="o">:</span> <span class="s2">"john@domain.com"</span>
<span class="p">});</span>
</pre></div>

<h3>save</h3>

<div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">save</span><span class="p">({</span>
  <span class="nx">_id</span><span class="o">:</span> <span class="s2">"[key]"</span><span class="p">,</span> <span class="c1">//optional</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s2">"John Doe"</span><span class="p">,</span>
  <span class="nx">email</span><span class="o">:</span> <span class="s2">"john@domain.com"</span>
<span class="p">});</span>
</pre></div>

<h3>get</h3>

<div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"[key]"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//success</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>

<h3>find</h3>

<div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s2">"John Doe"</span>
<span class="p">}).</span><span class="nx">toArray</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">//success</span>
    <span class="p">}</span>
  <span class="p">});</span>
</pre></div>

<h3>findOne</h3>

<div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s2">"John Doe"</span>
<span class="p">}),</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span><span class="nx">record</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">//success</span>
    <span class="p">}</span>
  <span class="p">});</span>
</pre></div>

<h3>filter</h3>

<div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">age</span> <span class="o">&gt;</span> <span class="mi">30</span><span class="p">;</span>
<span class="p">}).</span><span class="nx">toArray</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//success</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s1">'john'</span><span class="p">,</span><span class="s1">'i'</span><span class="p">);</span>
<span class="nx">db</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">query</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">doc</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
<span class="p">}).</span><span class="nx">toArray</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//success</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>

<h3>pick</h3>

<div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">age</span> <span class="o">&gt;</span> <span class="mi">30</span><span class="p">;</span>
<span class="p">}).</span><span class="nx">pick</span><span class="p">([</span><span class="s1">'name'</span><span class="p">,</span><span class="s1">'email'</span><span class="p">]).</span><span class="nx">toArray</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//success</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>

<h3>limit</h3>

<div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">age</span> <span class="o">&gt;</span> <span class="mi">30</span><span class="p">;</span>
<span class="p">}).</span><span class="nx">limit</span><span class="p">(</span><span class="mi">5</span><span class="p">).</span><span class="nx">toArray</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//success</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>

<h3>skip</h3>

<div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">age</span> <span class="o">&gt;</span> <span class="mi">30</span><span class="p">;</span>
<span class="p">}).</span><span class="nx">skip</span><span class="p">(</span><span class="mi">5</span><span class="p">).</span><span class="nx">limit</span><span class="p">(</span><span class="mi">5</span><span class="p">).</span><span class="nx">toArray</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span><span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//success</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>

<h3>remove</h3>

<div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">remove</span><span class="p">({</span>
  <span class="nx">email</span><span class="o">:</span> <span class="s2">"john@domain.com"</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//success</span>
  <span class="p">}</span>
<span class="p">})</span>
</pre></div>

<p>Or just use the key:</p>

<div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="s2">"[key]"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//success</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>

<h3>Delete the database</h3>

<div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Success</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>

<h2>Known issue</h2>

<ul>
<li>After many(?) database upgrades, sometimes Chrome needs to be restarted.</li>
</ul><h2>License</h2>

<p>MIT</p>

<h2>See also</h2>

<ul>
<li><a href="https://github.com/aaronpowell/db.js">aaronpowell/db.js</a></li>
<li><a href="https://github.com/jensarps/IDBWrapper">jensarps/IDBWrapper</a></li>
<li><a href="https://github.com/axemclion/IndexedDB">axemclion/IndexedDB</a></li>
<li><a href="https://github.com/grgrssll/IndexedDB">grgrssll/IndexedDB</a></li>
<li><a href="http://linq2indexeddb.codeplex.com/">linq2indexeddb</a></li>
<li>
<a href="https://github.com/yathit/ydn-db/blob/master/js/ydn/db/conn/indexed_db.js">ytkyaw/ydn-db</a> (adapter)</li>
<li>
<a href="https://github.com/brianleroux/lawnchair/blob/master/src/adapters/indexed-db.js">brianleroux/lawnchair</a> (adapter)</li>
<li>
<a href="https://github.com/daleharvey/pouchdb/blob/master/src/adapters/pouch.idb.js">daleharvey/pouchdb</a> (adapter)</li>
<li>
<a href="https://github.com/facebook/IndexedDB-polyfill">facebook/IndexedDB-polyfill</a> (polyfill)</li>
<li>
<a href="https://github.com/axemclion/IndexedDBShim">axemclion/IndexedDBShim</a> (polyfill)</li>
<li><a href="http://nparashuram.com/IndexedDB/">Parashuram's IndexedDB Experiments</a></li>
</ul>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/aaronshaf">aaronshaf</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>